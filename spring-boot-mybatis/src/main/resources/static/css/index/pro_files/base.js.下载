"use strict";if(!GY){var GY={};GY.host={imgSource:"http://img.yao123.cn/",rethost:"http://"+window.location.host,main:"http://"+window.location.host,testParam:"testParam",usercenterUrl:"http://login.yao123.com/"}}GY.plat=GY.host.current_platform,GY.interface={getChannel:{url:GY.host.main+"/cmowChannelAction.do",method:"getChannel"},getPrice:{url:GY.host.main+"/cmowStockAndPriceAction.do?",method:"getPrice"},checkStatus:{url:GY.host.main+"/cmowStockAndPriceAction.do",method:"checkStatus"},buyAgain:{url:GY.host.main+"/cmowTradeAction.do",method:"buyAgain"},leftStorey:{url:GY.host.main+"/cmowStoreyAction.do",method:"leftStorey"},skuPrice:{url:GY.host.main+"/cmowGoodsDetailAction.do",method:"skuPrice"},getHotLike:{url:GY.host.main+"/cmowChannelAction.do",method:"getHotLike"},ChannelList:{url:GY.host.main+"/cmowChannelAction.do",method:"getChannelList"},leftSideAd:{url:GY.host.main+"/product/leftSideAd"},detailAd:{url:GY.host.main+"/product/detailAd"},getLimit:{url:GY.host.main+"/cmowLimitedTimeLimitAction.do",method:"getLimit"},getNewsList:{url:GY.host.main+"/cmowNewsAction.do",method:"getNewsList"},getWebsiteNavigation:{url:GY.host.main+"/cmowWebsiteNavigationAdminAction.do",method:"getWebsiteNavigation"},getNewsDetails:{url:GY.host.main+"/cmowNewsAction.do",method:"getNewsDetails"},getStorey:{url:GY.host.main+"/cmowChannelAction.do",method:"getStorey"},Collection:{url:GY.host.main+"/cmowUserCollectionAction.do",method:"userCollection"},getStock:{url:GY.host.main+"/cmowStockAndPriceAction.do?",method:"getStock"},getMayNeed:{url:GY.host.main+"/cmowMayNeedAction.do",method:"getMayNeed"},getRecords:{url:GY.host.main+"/cmowTransactionRecordsAction.do",method:"getRecords"},getBrandShop:{url:GY.host.main+"/CmowBrandShopAction.do",method:"getBrandShop"},getFriendlyLink:{url:GY.host.main+"/CmowFriendlyLinkAction.do",method:"getFriendlyLink"},DaiXiaDanAction:{url:GY.host.main+"/cmowDaiXiaDanAction.do",method:"xiadan"},cmowFrontUserWatchRepeatAction:{url:GY.host.main+"/cmowFrontUserWatchRepeatAction.do",method:"getWatchRepeat"},getGoodSaleStatus:{url:GY.host.main+"/cmowStockAndPriceAction.do",method:"getGoodSaleStatus"},skuGroupLs:{url:GY.host.main+"/cmowGoodsDetailAction.do",method:"skuGroup"},getGoodsSales:{url:GY.host.main+"/cmowGoodsDetailAction.do",method:"goodsSku"},getGroupSales:{url:GY.host.main+"/cmowGoodsDetailAction.do",method:"groupSku"},getOwnCategories:{url:GY.host.goods+"/goodsCenter-interface-gwFront/service/baseData/getOwnCategories"},hotWord:{url:GY.host.main+"/cmowSuggestWordAdminAction.do",method:"hotWord"},getGoods:{url:GY.host.search+"/search/cmowGoodRetrievalAdminAction.do",method:"getGoods"},getGoodsSort:{url:GY.host.search+"/search/cmowGoodRetrievalAdminAction.do",method:"getGoodsSort"},getWatchRepeat:{url:GY.host.main+"/cmowFrontUserWatchRepeatAction.do",method:"getWatchRepeat"},getTypeInfo:{url:GY.host.search+"/search/cmowGoodRetrievalAdminAction.do",method:"getTypeInfo"},getTypeInfoCategory:{url:GY.host.search+"/search/cmowCategorySearchAdminAction.do",method:"getTypeInfo"},getGoodsSortCategory:{url:GY.host.search+"/search/cmowCategorySearchAdminAction.do",method:"getGoodsSort"},getGoodsCategory:{url:GY.host.search+"/search/cmowCategorySearchAdminAction.do",method:"getGoods"},getParam:{url:GY.host.main+"/cmowHelpAction.do",method:"getParam"},getUser:{url:GY.host.main+"/getUser"},login:{url:GY.host.usercenterUrl+"/userAccountInfoAction.do",method:"frontUserLogin"},code4register:{url:GY.host.usercenterUrl+"/userAccountInfoAction.do",method:"userGetTelPhoneIdentifyingCode"},code4login:{url:GY.host.usercenterUrl+"/userAccountInfoAction.do",method:"getTelIdentifyingCode"},code4image:{url:GY.host.main+"/cmowFrontUserAccountInfoAction.do",method:"getIdentifyingCode"},checkCode:{url:GY.host.usercenterUrl+"/userAccountInfoAction.do",method:"checkTelIdentifyingCode"},register4phone:{url:GY.host.usercenterUrl+"/userAccountInfoAction.do",method:"useTelphoneRegister"},beforeUpdateEmailCheck:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"beforeUpdateEmailCheck"},beforeUpdatePasswordCheck:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"beforeUpdatePasswordCheck"},sendUpdatePswdEmail:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"sendUpdatePswdEmail"},sendUpdatePswdEmailYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"sendUpdatePswdEmail"},updateEmail:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"updateEmail"},updateOrValidateEmail:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"updateOrValidateEmail"},updateOrValidateEmailYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"updateOrValidateEmail"},checkUserEmail:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"checkUserEmail"},checkUserEmailYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"checkUserEmail"},checkMail:{url:GY.host.usercenterUrl+"/userAccountInfoAction.do",method:"checkUserEmail"},sendMail:{url:GY.host.usercenterUrl+"/userAccountInfoAction.do",method:"getSendEmailFlag"},register4mail:{url:GY.host.usercenterUrl+"/userAccountInfoAction.do",method:"userEmailRegister"},automaticLogin:{url:GY.host.usercenterUrl+"/userAccountInfoAction.do",method:"automaticLogin"},addShopCar:{url:GY.host.main+"/cmowShopCarAction.do",method:"addShopCar"},changeNum:{url:GY.host.main+"/cmowShopCarAction.do",method:"changeNum"},delShopCar:{url:GY.host.main+"/cmowShopCarAction.do",method:"delShopCar"},carCollection:{url:GY.host.main+"/cmowUserCollectionAction.do",method:"carCollections"},checkCar:{url:GY.host.main+"/cmowShopCarAction.do",method:"checkCar"},userCar:{url:GY.host.main+"/cmowShopCarAction.do",method:"userCar"},carNum:{url:GY.host.main+"/cmowShopCarAction.do",method:"carNum"},MyCollectiond:{url:GY.host.main+"/CmowFrontUserAddressAction.do"},checkStock:{url:GY.host.main+"/cmowStockAndPriceAction.do",method:"checkStock"},getUserCollection:{url:GY.host.main+"/cmowUserCollectionAction.do",method:"getUserCollection"},getMyAddress:{url:GY.host.main+"/CmowFrontUserAddressAction.do",method:"getMyAddress"},saveAddress:{url:GY.host.main+"/CmowFrontUserAddressAction.do",method:"saveAddress"},updateAddress:{url:GY.host.main+"/CmowFrontUserAddressAction.do",method:"updateAddress"},deleteAddress:{url:GY.host.main+"/CmowFrontUserAddressAction.do",method:"deleteAddress"},setDefaultAddress:{url:GY.host.main+"/CmowFrontUserAddressAction.do",method:"setDefaultAddress"},figureCar:{url:GY.host.main+"/cmowShopCarAction.do",method:"figureCar"},getUserInvoices:{url:GY.host.main+"/cmowUserInvoicesTitleAction.do",method:"getUserInvoices"},delUserInvoices:{url:GY.host.main+"/cmowUserInvoicesTitleAction.do",method:"delUserInvoices"},updateUserInvoices:{url:GY.host.main+"/cmowUserInvoicesTitleAction.do",method:"updateUserInvoices"},saveUserInvoices:{url:GY.host.main+"/cmowUserInvoicesTitleAction.do",method:"saveUserInvoices"},saveTrade:{url:GY.host.main+"/cmowTradeAction.do",method:"saveTrade"},getPostFee:{url:GY.host.main+"/cmowTradeAction.do",method:"getPostFee"},getCanUseCard:{url:GY.host.main+"/cmowB2cCouponAction.do",method:"getCanUseCard"},goodGroupDetail:{url:GY.host.main+"/cmowGoodAndGroupDetailAction.do",method:"goodGroupDetail"},getTradeByNo:{url:GY.host.main+"/cmowTradeAction.do",method:"getTradeByNo"},frontUserHomePage1:{url:GY.host.main+"/cmowFrontUserInformationAction.do",method:"frontUserHomePage"},getActivePayPlatformPromotionList:{url:GY.host.main+"/cmowTradeAction.do",method:"getActivePayPlatformPromotionList"},getPromotionPrice:{url:GY.host.main+"/cmowTradeAction.do",method:"getPromotionPrice"},checkIsPay:{url:GY.host.main+"/cmowTradeAction.do",method:"checkIsPay"},checkUserTelphone:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"checkUserTelphone"},updateValidateTel:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"updateValidateTel"},updateValidateTelYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"updateValidateTel"},updatePassword:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"updatePassword"},updatePasswordYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"updatePassword"},bugAgain:{url:GY.host.main+"/cmowTradeAction.do",method:"bugAgain"},checkTrade:{url:GY.host.main+"/cmowTradeAction.do",method:"checkTrade"},cancelTrade:{url:GY.host.main+"/cmowTradeAction.do",method:"cancelTrade"},getUserCoupon:{url:GY.host.main+"/cmowB2cCouponAction.do",method:"getUserCoupon"},drawCoupon:{url:GY.host.main+"/cmowB2cCouponAction.do",method:"drawCoupon"},accountindex:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"index"},getTradeById:{url:GY.host.main+"/cmowTradeAction.do",method:"getTradeById"},saveFeedBack:{url:GY.host.main+"/cmowFeedBackAction.do",method:"saveFeedBack"},getExpress:{url:GY.host.main+"/cmowExpressAction.do",method:"getExpress"},getExpressDetail:{url:GY.host.main+"/cmowExpressAction.do",method:"getExpressDetail"},MyCollection:{url:GY.host.main+"/cmowUserCollectionAction.do",method:"getMyCollection"},deleteMyCollection:{url:GY.host.main+"/cmowUserCollectionAction.do",method:"deleteMyCollection"},frontUserHomePage:{url:GY.host.main+"/cmowFrontUserInformationAction.do?",method:"getFrontUserInformation"},updateFrontUserInformation:{url:GY.host.main+"/cmowFrontUserInformationAction.do?",method:"updateFrontUserInformation"},upload:{url:GY.host.main+"/cmowFrontUserInformationAction.do?",method:"upload"},getTradeByUser:{url:GY.host.main+"/cmowTradeAction.do",method:"getTradeByUser"},userCollection:{url:GY.host.main+"/cmowUserCollectionAction.do",method:"userCollection"},getTelPhoneIdentifyCode:{url:GY.host.usercenterUrl+"/userAccountSafetyAction.do",method:"getTelPhoneIdentifyCode"},getTelPhoneIdentifyCodeYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"getTelPhoneIdentifyCode"},findUserByName:{url:GY.host.usercenterUrl+"/userAccountSafetyAction.do",method:"findUserByName"},findUserByNameYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"findUserByName"},checkTelValidateCode:{url:GY.host.usercenterUrl+"/userAccountSafetyAction.do",method:"checkTelValidateCode"},checkTelValidateCodeYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"checkTelValidateCode"},resetPassword:{url:GY.host.usercenterUrl+"/userAccountSafetyAction.do",method:"resetPassword"},resetPasswordYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"resetPassword"},findBackPswdByTel:{url:GY.host.usercenterUrl+"/userAccountSafetyAction.do",method:"findBackPswdByTel"},findBackPswdByTelYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"findBackPswdByTel"},findBackPswdByEmail:{url:GY.host.usercenterUrl+"/userAccountSafetyAction.do",method:"findBackPswdByEmail"},findBackPswdByEmailYH:{url:GY.host.main+"/cmowFrontUserAccountSafetyAction.do",method:"findBackPswdByEmail"},beforeResetPasswordCheck:{url:GY.host.usercenterUrl+"/userAccountSafetyAction.do",method:"beforeResetPasswordCheck"},userDemandOrder:{url:GY.host.main+"/cmowDemandOrderAction.do",method:"userDemandOrder"}},GY.settings={defaultImg:"/static/image/base/default.jpg"};var returnUrlEn=encodeURIComponent(GY.host.main)+encodeURIComponent("/usercenterLogin");function genId(o){return(o||"GY")+ ++GY.idSeed}function regular(){return{isphone:function(o){return/^(13[0-9]|15[012356789]|18[0123456789]|14[0123456789]|166|19[0123456789]|17[0-9])\d{8}$/.test(o)},ismall:function(o){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(o)},isTel:function(o){return/^0\d{2,3}-?\d{7,8}$/.test(o)}}}GY.loginReturnUrl=GY.host.usercenterUrl+"/login?plat="+GY.plat+"&returnUrl="+returnUrlEn+"&retUrl="+encodeURIComponent(window.location.href),GY.io=function(o){return $.ajax({url:o.url,data:o.data||{},dataType:"json"})},GY.iop=function(o){return $.ajax({url:o.url,data:o.data||{},dataType:"jsonp"})},GY.iophtml=function(o){return $.ajax({url:o.url,data:o.data||{},dataType:"html",jsonp:"jsonpcallback"})},GY.iopa=function(o){return $.ajax({url:o.url,async:!1,data:o.data||{},dataType:"jsonp"})},GY.iopost=function(o){return $.ajax({url:o.url,type:"POST",data:o.data||{},dataType:"jsonp"})},GY.iopw=function(o,e){return $.ajax({url:o.url,data:o.data||{},dataType:"jsonp"}).done(function(o){GY.apistatus(o,e)}).fail(function(o){})},GY.apistatus=function(){var o=arguments[0],e=arguments[1];switch(o.status){case 0:e(o);break;case-3:window.location.href=o.data;break;case-2:GY.dialogInfo({title:"错误信息",text:o.msg,auto:3e3,fooder:"closed"});break;default:GY.dialogInfo({title:"信息",text:o.msg,auto:3e3,fooder:"closed"})}},GY.getUrlQuery=function(o){var e=new RegExp("(^|&)"+o+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(e);return null!=t?decodeURIComponent(t[2]):null},GY.idSeed=0,GY.dialogInfo=function(o,e){var t=$.extend({title:"提示",cls:"",auto:!1,id:""},o),n=genId("dialog");function r(o){$(o).parents(".dialogInfo").detach(),$("#mask").detach()}$("body").append(function(o){var e=[];e.push('<div class="dialogInfo dialog dialogP'+t.cls+'" id="'+o+'"><div class="mask"></div>'),e.push('<div class="dialog-content date '+t.cls+'">'),e.push('<div class="dialog-header">'+t.title+"<i data-closed></i></div>"),e.push('<div class="dialog-body"><p>'+t.text+"</p></div>"),e.push('<div class="dialog-action">'),1==t.fooder&&(e.push('<span data-enter class="btn">确定</span>'),e.push('<span data-closed class="btn ml12">取消</span>'));"closed"==t.fooder&&e.push('<div style="width:100%; text-align:center;"><span data-closed class="btn">确定</span></div>');return e.push("</div>"),e.push("</div></div>"),e.join("")}(n)),!0===t.isMask&&$("body").append('<div id="mask"></div>'),$(".dialogInfo").on("click","[data-enter]",r).on("click","[data-closed]",function(){r(this)}),!1!==t.auto&&setTimeout(function(){$("#"+n).detach()},t.auto),e&&e()},GY.GetUrlParms=function(o){for(var e=new Object,t=o.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("=");if(-1!=r){var a=t[n].substring(0,r),d=t[n].substring(r+1).replace(new RegExp(/(%)/g),"%25");e[a]=unescape(d)}}return e},GY.UrlParamDel=function(o,e){var t="";if(-1==o.indexOf("?"))return o;var n="",r="";if(-1==(t=o.substr(o.indexOf("?")+1)).indexOf("&"))return(n=t.split("="))[0]==e?o.substr(0,o.indexOf("?")):o;for(var a in n=t.split("&"))n[a].split("=")[0]!=e&&(r=r+n[a].split("=")[0]+"="+n[a].split("=")[1]+"&");return o.substr(0,o.indexOf("?"))+"?"+r.substr(0,r.length-1)},GY.UrlUpdateParams=function(url,name,value){var r=url;if(null!=r&&"undefined"!=r&&""!=r){value=encodeURIComponent(value);var reg=new RegExp("(^|)"+name+"=([^&]*)(|$)"),tmp=name+"="+value;r=null!=url.match(reg)?url.replace(eval(reg),tmp):url.match("[?]")?url+"&"+tmp:url+"?"+tmp}return r},function(d){d.fn.extend({getUseCard:function(n){n=d.extend({zhucehtml:"<div>1</div>",zhucehtml1:"<div>2</div>",zhucehtml2:"<div>3</div>",zhucehtml3:"<div>4</div>",zhucehtml4:"<div>5</div>",zhucehtml5:"<div>6</div>"},n),d(this).find("a");function a(o,e){var t=[];switch(t.push('<div class="tan dialog-wrap">'),t.push('<div class="close closece" style="background-color:#ffffff;"></div>'),o){case 1:t.push(n.zhucehtml);break;case 2:t.push(n.zhucehtml1);break;case 21:t.push(n.zhucehtml2);break;case 3:t.push(n.zhucehtml3);break;case 31:t.push(n.zhucehtml4);break;case 5:t.push(n.zhucehtml5);break;case 6:t.push(n.zhucehtml6)}return t.push("</div>"),t.join("")}return this.each(function(){var o=d(this);d("a",o).click(function(){var o=d(this).attr("dataid"),r=d(this).attr("databtn");GY.iop({url:GY.interface.drawCoupon.url,data:{method:GY.interface.drawCoupon.method,issueId:o}}).done(function(o){if(-3==o.status){var e=encodeURIComponent(GY.host.main+"/usercenterLogin"),t=encodeURIComponent(window.location.href),n=GY.host.usercenterUrl+"/login?plat="+GY.plat+"&returnUrl="+e+"&retUrl="+t;window.location.href=n}0==o.status&&(0==o.data.resultCode&&(1==r?d(".body").append(a(2,o.rethost)):2==r?d(".body").append(a(21,o.rethost)):3==r&&d(".body").append(a(31,o.rethost))),1==o.data.resultCode&&d(".body").append(a(3,o.rethost)),-3==o.data.resultCode&&d(".body").append(a(5,o.rethost)),4!=o.data.resultCode&&5!=o.data.resultCode||d(".body").append(a(6,o.rethost)),d(document).on("click",".close",function(){d(".dialog-wrap").hide()}))})})})}})}(jQuery),GY.getDataParams=function(o){var e=GY.GetUrlParms(location.search.substring(1));if(void 0!==e[o])return e[o]},GY.replaceChart=function(o){return o.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/\n/g,"<br/>").replace(/\//g,"&frasl;").replace(/\\/g,"&frasl;")},GY.toDecimal2=function(o){var e=parseFloat(o);if(isNaN(e))return!1;var t=(e=Math.round(100*o)/100).toString(),n=t.indexOf(".");for(n<0&&(n=t.length,t+=".");t.length<=n+2;)t+="0";return t},GY.shopListLoad=function(){$("[data-closed]").click(function(){window.location.href=GY.host.main+"/shopCar"})};
!function(r){r.Buffers=function(){this._s=new Array,this.type=!1},r.Buffers.prototype={push:function(e){if(0==arguments.length)return!1;for(var s=0;s<arguments.length;s++)this._s.push(arguments[s]);return this._s.length},toString:function(){var e=this._s.join("");return this._s.length=0,e}},r.fn.countdownCode=function(){var e=r(this),t=60;!function e(s){0==t?(s.removeClass("disabled"),s.text("发送验证码 "),t=60):(s.addClass("disabled"),s.text("("+t+")秒后可重新发送 "),t--,setTimeout(function(){e(s)},1e3))}(e)},r.extend({cookie:function(e,s,t){if(0==arguments.length){try{if(0==navigator.cookieEnabled)return!1}catch(e){}return!0}if(1<arguments.length&&"[object Object]"!==String(s)){if(t=r.extend({},t),null==s&&(t.expires=-1),"number"==typeof t.expires){var n=t.expires,o=t.expires=new Date;o.setDate(o.getDate()+n)}return s=String(s),document.cookie=[encodeURIComponent(e),"=",t.raw?s:encodeURIComponent(s),t.expires?"; expires="+t.expires.toUTCString():"",t.path?"; path="+t.path:"",t.domain?"; domain="+t.domain:"",t.secure?"; secure":""].join("")}var a,i=(t=s||{}).raw?function(e){return e}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?i(a[1]):""}}),GY.loginCard={init:function(){var e=arguments[0]||"";this.showLogin(e)},loginTitle:function(){return[].join("")},loginHeader:function(){var e=[];return e.push('<ul class="clear login-tab">'),e.push('<li class="fl active" >'),e.push("账户密码登录"),e.push('<span class="arrow-down"></span>'),e.push("</li>"),e.push('<li class="fl">'),e.push("动态密码登录"),e.push('<span class="arrow-down"></span>'),e.push("</li>"),e.push("</ul>"),e.join("")},loginMsg:function(){var e=[];return e.push('<div class="clear msg-wrap">'),e.push('<div class="msg-info msg-warn"><b></b>&nbsp;</div>'),e.push('<div class="msg-info msg-error" style="display: none;"><b></b></div>'),e.push("</div>"),e.join("")},loginAction:function(){var e=[];return e.push('<div class="clear login-box-bottom">'),e.push('<span>还不是国药会员？</span>&nbsp;&nbsp;&nbsp;&nbsp;<a class="reg-btn red" href="'+GY.host.usercenterUrl+"/register?plat="+GY.plat+'">立即注册&gt;&gt;</a>'),e.push("</div>"),e.join("")},loginForm:function(){var e=[],s=encodeURIComponent(GY.host.rethost+"/usercenterLogin"),t=encodeURIComponent(window.location.href);return e.push('<form class="login-form" userForm>'),e.push('<ul class="login-box">'),e.push('<li class="clear item mt0">'),e.push('<span class="bg-gray user-ico"></span>'),e.push('<input name="username" class="username fl" placeholder="用户名/邮箱/手机号" type="text">'),e.push("</li>"),e.push('<li class="clear item">'),e.push('<span class="bg-gray psd-ico"></span>'),e.push('<input name="password" class="password fl" placeholder="登录密码" type="password">'),e.push("</li>"),e.push('<li class="clear ">'),e.push('<label class="fl f14"><input class="checkbox" type="checkbox"><span class="auto_text">自动登录</span></label>'),e.push('<a class="red fr f14" href="'+GY.host.usercenterUrl+"/findBackPswd?plat="+GY.plat+'">忘记密码?</a>'),e.push("</li>"),e.push('<li class="clear ">'),e.push('<a href="javascript:void(0);" login="default" class="login-btn">登录</a>'),e.push("</li>"),e.push('<li class="tx-l clear">'),e.push("使用合作网站账号登录国药网&nbsp;"),e.push("</li>"),e.push('<li class="tx-l clear" style="min-height:38px;">'),e.push('<a href="'+GY.host.usercenterUrl+"/toLoginWxIndexDialog.do?plat="+GY.plat+"&returnUrl="+s+"&retUrl="+t+'" class="wx"></a>'),e.push('<a href="'+GY.host.usercenterUrl+"/toLoginQqIndexDialog.do?plat="+GY.plat+"&returnUrl="+s+"&retUrl="+t+'" class="qq"></a>'),e.push("</li>"),e.push("</ul>"),e.push("</form>"),e.push('<form class="login-form hide" phoneForm>'),e.push('<ul class="login-box">'),e.push('<li class="clear item mt0">'),e.push('<span class="bg-gray user-ico"></span>'),e.push('<input name="phone" class="username fl" placeholder="手机号" type="text">'),e.push("</li>"),e.push('<li class="clear item">'),e.push('<span class="bg-gray psd-ico"></span>'),e.push('<input name="code" class="password dynamic-psd fl" placeholder="短信验证码" type="text">'),e.push('<div id="code" class="dynamic-btn fr">发送验证码</div>'),e.push("</li>"),e.push('<li class="clear">'),e.push('<label class="fl f14"><input class="checkbox" type="checkbox"><span class="auto_text">自动登录</span></label>'),e.push('<a class="red fr f14" href="'+GY.host.usercenterUrl+"/findBackPswd?plat="+GY.plat+'">忘记密码?</a>'),e.push("</li>"),e.push('<li class="clear">'),e.push('<a href="javascript:void(0);" login="phone" class="login-btn">登录</a>'),e.push("</li>"),e.push('<li class="tx-l clear">'),e.push("使用合作网站账号登录国药网&nbsp;"),e.push("</li>"),e.push('<li class="tx-l clear" style="min-height:38px;">'),e.push('<a href="'+GY.host.usercenterUrl+"/toLoginWxIndexDialog.do?plat="+GY.plat+"&returnUrl="+s+"&retUrl="+t+'" class="wx"></a>'),e.push('<a href="'+GY.host.usercenterUrl+"/toLoginQqIndexDialog.do?plat="+GY.plat+"&returnUrl="+s+"&retUrl="+t+'" class="qq"></a>'),e.push("</li>"),e.push("</ul>"),e.push("</form>"),e.join("")},loginTemp:function(){var e=[],s=this;return e.push(s.loginHeader()),e.push(s.loginMsg()),e.push(s.loginForm()),e.push(s.loginAction()),e.push(""),e.push(""),e.join("")},showLogin:function(e){GY.dialogInfo({title:this.loginTitle(),text:this.loginTemp(),cls:"login"},function(i){r(document).on("click",".login-tab li",function(){var e=r(this).index();r(this).addClass("active").siblings().removeClass("active"),r(".login-form").hide(),r(".login-form").eq(e).fadeIn(0),r(".login-form").eq(e).find("input").val(""),r(".msg-error").text("").hide(),r(".msg-warn").show()});var s=new regular;r(document).on("click","#code",function(){r(this).text();var e=r.trim(r("[name=phone]").val()),t=r(this);if(!t.hasClass("disabled")){if(""===e)return r(".msg-error").html("<b></b>手机号不能为空！").show(),void r(".msg-warn").hide();if(!1===s.isphone(e))return r(".msg-error").html("<b></b>请填写正确的手机号码！").show(),void r(".msg-warn").hide();t.addClass("disabled"),GY.iop({url:GY.host.usercenterUrl+"/userAccountInfoDialogAction.do",data:{method:"getTelIdentifyingCode",telPhone:e,plat:GY.plat}}).done(function(e){t.removeClass("disabled"),0===e.status&&(GY.dialogInfo({text:"验证码已发送，请注意查收短信。如果您没有收到短信，可以在60秒后重新获取短信验证码。",auto:3e3,fooder:"closed"}),t.countdownCode()),-2===e.status&&GY.dialogInfo({text:e.msg,auto:3e3,fooder:"closed"})}).fail(function(e,s){t.removeClass("disabled"),GY.dialogInfo({text:"网络连接异常 !",auto:3e3,fooder:"closed"})})}}),r(document).on("click","[login]",function(){var e,s,t,n,o=r(this).attr("login"),a=(r(this).parents("ul").find(".checkbox").prop("checked"),{});if(a.method="userLogin","default"===o){if(e=r.trim(r(this).parents("ul").find("[name=username]").val()),s=r.trim(r(this).parents("ul").find("[name=password]").val()),""===e)return r(".msg-error").html("<b></b>用户名不能为空！").show(),void r(".msg-warn").hide();if(""===s)return r(".msg-error").html("<b></b>密码不能为空！").show(),void r(".msg-warn").hide();a.loginType=0,a.loginName=encodeURIComponent(e),a.password=encodeURIComponent(s),a.returnUrl=encodeURIComponent(GY.host.rethost+"/usercenterLogin"),a.plat=GY.plat,a.retUrl=""!==i?encodeURIComponent(GY.host.rethost+"/"+i):encodeURIComponent(window.location.href)}if("phone"===o){if(t=r.trim(r(this).parents("ul").find("[name=phone]").val()),n=r.trim(r(this).parents("ul").find("[name=code]").val()),""===t)return r(".msg-error").html("<b></b>手机号不能为空！").show(),void r(".msg-warn").hide();if(""===n)return r(".msg-error").html("<b></b>验证码不能为空！").show(),void r(".msg-warn").hide();a.loginType=1,a.loginName=t,a.password=n,a.returnUrl=encodeURIComponent(GY.host.rethost+"/usercenterLogin"),a.plat=GY.plat,a.retUrl=""!==i?encodeURIComponent(GY.host.rethost+"/"+i):encodeURIComponent(window.location.href)}GY.iop({url:GY.host.usercenterUrl+"/userAccountInfoDialogAction.do",data:a}).done(function(e){0===e.status&&(window.location.href=e.data),-2===e.status&&(r(".msg-error").html("<b></b>"+e.msg).show(),r(".msg-warn").hide())}).fail(function(e,s){GY.dialogInfo({text:"网络连接异常 !",auto:3e3,fooder:"closed"})})}),r(document).on("submit","[userForm]",function(){})}(e))}},r.fn.getUserHistoryTpl=function(){var o=arguments[0]||10,e=r.cookie("gwHistory_n");if(e)for(var s=e.split("_"),t=[],n={},a=0;a<s.length;a++){for(var i=0;i<s[a].split("|").length;i++)n={code:s[a].split("|")[0],type:s[a].split("|")[1]};t.push(n)}""!=e?GY.iop({url:GY.interface.goodGroupDetail.url,data:{method:GY.interface.goodGroupDetail.method,param:JSON.stringify(t)}}).done(function(t){var n=[];0==t.status?"nodata"!=t.data?(r.each(t.data,function(e,s){e<o&&n.push(r.fn.dealTpl(t,s))}),r("#listAnimate1").html(n),0<r(".listAnimatebox").size()&&r(".listAnimatebox").owlCarousel({items:6,singleItem:!1,slideSpeed:400,paginationSpeed:400,rewindSpeed:400,autoPlay:!1,navigation:!0,pagination:!1,navigationText:["<",">"]})):r("#listAnimate1").html('<p class="nodata_info">暂时无结果</p>'):-3===t.status?window.location.href=t.data:(t.status,GY.dialogInfo({title:"错误信息",text:t.msg}))}).fail(function(){}):r("#listAnimate1").html('<p class="nodata_info">暂时无结果</p>')},r.fn.renderWatch=function(){r(".watchlist").html('<div class="loading"></div>'),GY.iopw({url:GY.interface.getWatchRepeat.url,data:{method:GY.interface.getWatchRepeat.method}},function(){var e=arguments[0],s=GY.host.imgSourceSku;""!=e.data?r(".watchlist").html(function(e,t){var n=[];return r.each(e,function(e,s){n.push('<div class="product-items">'),n.push('<a class="img" href="'+s.retUrl+'">'),n.push('<img src="'+t+s.imgUrl+'@!m145">'),n.push("<i></i>"),n.push("</a>"),n.push('<a href="'+s.retUrl+'">'+s.goodCode+"</a>"),n.push('<p><span class="opr">¥&nbsp;'+s.price+"<i></i></span></p>"),n.push("</div>")}),n.join(" ")}(e.data,s)):r(".watchlist").html('<p class="no_info">暂无数据</p>')})}}(jQuery);
"use strict";!function(s){var i;function o(t){var i,a=[];return a.push('<div class="miniGiftList" style="clear:both;width:100%;">'),s.each(t,function(t,o){i=GY.host.main+"/product/"+o.goodCode+"_1",0<o.count&&(a.push('<div class="gift">'),a.push('<a class="gift-info" href="'+i+'" target="_blank" title="'+o.name+'">【赠品】'+o.name+"</a>"),a.push('<span class="num">X'+o.count+"</span>"),a.push("</div>"))}),a.push("</div>"),a.join("")}function e(t){return new Date(t.replace(/-/g,"/")).getTime()}jQuery.fn.sortElements=(i=[].sort,function(t,a){a=a||function(){return this};var o=this.map(function(){var t=a.call(this),o=t.parentNode,i=o.insertBefore(document.createTextNode(""),t.nextSibling);return function(){if(o===this)throw new Error("You can't sort elements if any one is a descendant of another.");o.insertBefore(this,i),o.removeChild(i)}});return i.call(this,t).each(function(t){o[t].call(a.call(this))})}),s.fn.miniShopcar=function(){var t=[];return t.push('<div class="dorpdown settleup">'),t.push(' <div class="cw-icon">'),t.push('<i class="ci-left"></i>'),t.push('<i class="ci-right">&gt;</i><i id="shopping-amount" class="ci-count">0</i>'),t.push('<a class="go_cart" href="'+GY.host.main+'/shopCar" target="_blank">我的购物车</a>'),t.push("</div>"),t.push('<div class="c-dorpdown-layer">'),t.push('<div class="spacer"></div>'),t.push('<div id="settleup-content">'),t.push('<span class="loading"><img src="'+GY.host.main+'/static/image/base/loading.gif" width="50" height="50" /></span>'),t.push("</div>"),t.push("</div>"),t.push("</div> "),t.join("")},s.fn.miniItem=function(t,o,i){var a=[];return i?a.push('<div class="mini-item" data-time="'+e(i)+'">'):a.push('<div class="mini-item">'),a.push('<div class="p-img fl" data-num="'+t.goodCount+'">'),a.push('<a target="_blank" href="'+GY.host.rethost+"/product/"+t.goodCode+"_"+t.type+'"><img src="'+GY.host.imgSourceSku+t.goodImg+'@!s100" alt="'+t.goodName+'" ></a>'),a.push("</div>"),a.push(' <div class="p-name fl"><a target="_blank" title="'+t.goodName+'"  href="'+GY.host.rethost+"/product/"+t.goodCode+"_"+t.type+'">'+t.goodName+"</a></div>"),a.push('<div class="p-detail fr ar">'),a.push('<span class="p-price"><strong>￥'+(0==t.isPromotion?t.promotionPrice.toFixed(2):t.goodPrice.toFixed(2))+"</strong>×"+t.goodCount+"</span>"),a.push(' <br><a href="javascript:void(0)" class="delete" goodcode="'+t.goodCode+'" goodsku="'+t.skuCode+'" limited="'+t.isLimited+'" carid="'+t.carId+'">删除</a>'),a.push("</div>"),a.push("</div>"),a.join("")},s.fn.miniCartCodeItemGroup=function(t){var i=[];return i.push('<div class="goodcodeItem" cid="'+t.goodCode+'" style="clear:both;">'),i.push('<div class="codeItemHeader"><span class="codeText">商品编码：'+t.goodCode+"</span></div>"),s.each(t.shopCarGoodVOList,function(t,o){i.push(s.fn.miniItem(o))}),0<t.givenGoodsVOList.length&&i.push(o(t.givenGoodsVOList)),i.push("</div>"),i.join("")},s.fn.miniCartCodeItem=function(t){var i=[];return i.push('<div class="goodcodeItem" cid="'+t.goodCode+'" data-time="'+e(t.putShopCarTime)+'">'),i.push('<div class="codeItemHeader"><span class="codeText">商品编码：'+t.goodCode+"</span></div>"),s.each(t.shopCarGoodVOList,function(t,o){1!==o.goodState&&i.push(s.fn.miniItem(o,""))}),0<t.givenGoodsVOList.length&&i.push(o(t.givenGoodsVOList)),i.push("</div>"),i.join("")},s.fn.shopcarMiniTpl=function(t){var i=[];if(i.push('<div class="smc">'),0<t.data.shopAct.length){var a=["满减","满折","满赠"];s.each(t.data.shopAct,function(t,o){i.push('<div id="mcart-mj" data-time="'+e(o.putShopCarTime)+'">'),i.push('<div class="dt">'),i.push('<div class=""><span class="icon_gtype text-orange">'+a[o.type-1]+' </span>&nbsp;<span class="title">'+o.xyPromotionName+"</span></div>"),i.push('<div class="clr"></div>'),i.push("</div>"),s.each(o.shopCarGoodGroupVOList,function(t,o){i.push(s.fn.miniCartCodeItemGroup(o))}),i.push("</div>")})}return 0<t.data.shopCarGoodGroupVOList.length&&s.each(t.data.shopCarGoodGroupVOList,function(t,o){i.push(s.fn.miniCartCodeItem(o))}),i.push("</div>"),i.push('<div class="shopCarInvalidList">'),0<t.data.shopCarGoodGroupVOList.length&&i.push(function(t){var o=[];return o.push(t),o.join("")}(function(t){var i=[];return s.each(t,function(t,o){s.each(o.shopCarGoodVOList,function(t,o){1===o.goodState&&i.push(function(t){var o=[];return console.log(t.goodCount),o.push('<div class="mini-item"><div class="p-img" data-num="'+t.goodCount+'"></div></div>'),o.join("")}(o))})}),i.join("")}(t.data.shopCarGoodGroupVOList))),i.push("</div>"),i.push('<div class="smb ar">'),i.push('<div class="shopCartInbalidNum" style="display:none;"><a href="'+GY.host.main+'/shopCar">失效商品（<span class="invalid_num">0</span>）</a></div>'),i.push('<div class="shopCartBar">'),i.push('<div class="p-total">共<b>'+t.data.totalGoodCount+'</b>件商品&#12288;共计<strong class="text-orange">￥'+t.data.totalPromotionPrice.toFixed(2)+"</strong></div>"),i.push('<a id="btn-payforgoods" title="去购物车" href="'+GY.host.main+'/shopCar">去购物车</a>'),i.push("</div>"),i.push("</div>"),i.join("")},s.fn.readerMiniShopList=function(){GY.iop({url:GY.interface.userCar.url,data:{method:GY.interface.userCar.method,shopCar:"mini"}}).done(function(t){if(0==t.status)if("nodata"!=t.data){s(".ci-count").html(t.data.totalGoodCount),s("#settleup-content").html(s.fn.shopcarMiniTpl(t)),s("#settleup-content").find(".loading").remove(),s(".settleup").addClass("minilist"),s("[data-time]").sortElements(function(t,o){return s(t).attr("data-time")>s(o).attr("data-time")?-1:1},function(){return s(".smc").append(this),this.parentNode});var i=0;s.each(s(".shopCarInvalidList .mini-item .p-img"),function(t,o){i+=parseInt(s(o).attr("data-num"))}),0<i&&(s(".invalid_num").text(i),s(".shopCartInbalidNum").show()),s.each(s(".goodcodeItem"),function(t,o){0===s(o).find(".mini-item").size()&&s(o).hide()}),s.each(s(".miniGiftList"),function(t,o){0===s(o).find(".gift").size()&&s(o).hide()})}else s(".ci-count").html(0),s("#settleup-content").html('<div class="prompt"><div class="nogoods"><b></b><p class="no_text">购物车中还没有商品，请赶紧选购吧！</p></div></div>');else-3===t.status?(GY.dialogInfo({title:"信息",text:t.msg}),window.location.href=t.data):(t.status,GY.dialogInfo({title:"错误信息",text:t.msg}))}).fail(function(){})},s.fn.setTotalPrice=function(){GY.iop({url:GY.interface.checkCar.url,data:{method:GY.interface.checkCar.method,param:checkCar()}}).done(function(t){if(0==t.status){var o=0;t.data&&(o=t.data.totalPrice.toFixed(2),toDecimal2(parseFloat((t.data.totalPrice-t.data.totalPromotionPrice).toFixed(2)))),s(".p-total").find("strong").text("¥"+o)}else-3===t.status?(GY.dialogInfo({title:"信息",text:t.msg}),window.location.href=t.data):(t.status,GY.dialogInfo({title:"错误信息",text:t.msg}))}).fail(function(){})},s.fn.delShopCar=function(t){GY.iop({url:GY.interface.delShopCar.url,data:{method:GY.interface.delShopCar.method,params:t}}).done(function(t){0==t.status?(s.fn.readerMiniShopList(),s.fn.getCartNum(),s(".go_cart").attr("href",GY.host.main+"/shopCar")):-3===t.status?(GY.dialogInfo({title:"信息",text:t.msg}),window.location.href=t.data):(t.status,GY.dialogInfo({title:"错误信息",text:t.msg}))}).fail(function(){})},s.fn.getCartNum=function(){GY.iop({url:GY.interface.carNum.url,data:{method:GY.interface.carNum.method}}).done(function(t){0==t.status?s(".ci-count").html(t.data.car):-3===t.status?(GY.dialogInfo({title:"信息",text:t.msg}),window.location.href=t.data):(t.status,GY.dialogInfo({title:"错误信息",text:t.msg}))}).fail(function(){})};var a=0;s(document).on("mouseenter mouseleave",".settleup ",function(t){1==++a&&"mouseenter"==t.type&&s.fn.readerMiniShopList(),"mouseleave"==t.type&&(a=0)}),s(document).on("click",".delete",function(){s.fn.delShopCar('[{"code":"'+s(this).attr("goodcode")+'","skuCode":"'+s(this).attr("goodsku")+'","priceType":"'+s(this).attr("limited")+'"}]')})}(jQuery);