"use strict";function promotionType(e,t){switch(e){case 1:switch(t){case 1:return PROMOTIONDESC_1;case 2:return PROMOTIONDESC_2;case 3:return PROMOTIONDESC_3;case 4:return PROMOTIONDESC_4;case 5:return PROMOTIONDESC_5;default:return PROMOTIONDESC_ERROR}case 2:switch(t){case 1:return PROMOTIONDESC_6;case 2:return PROMOTIONDESC_7;case 3:return PROMOTIONDESC_8;case 4:return PROMOTIONDESC_4;case 5:return PROMOTIONDESC_8;default:return PROMOTIONDESC_ERROR}case 3:switch(t){case 1:return PROMOTIONDESC_9;case 2:return PROMOTIONDESC_9;default:return PROMOTIONDESC_ERROR}case 4:switch(t){case 1:return PROMOTIONDESC_1;case 3:return PROMOTIONDESC_3;default:return PROMOTIONDESC_ERROR}case 5:switch(t){case 5:return PROMOTIONDESC_5;case 6:return PROMOTIONDESC_10;default:return PROMOTIONDESC_ERROR}default:return PROMOTIONDESC_ERROR}}function getCachedata(e){return encodeURIComponent(cachedata.attr(e))}function setCoillection(){var e=["TCGWQ0100011","GWF0101396","GWQ0103738"];$(".product-list").find(".items");$.each(e,function(e,t){$("[code="+t+"]").find(".collect").addClass("collect_on").html("<i></i>已收藏")})}function getListParams(){$(".product-list ul li .items").size();var e=$(".product-list ul li .items"),t={},n=[];return $.each(e,function(e,a){t={goodCode:$(a).attr("code"),type:$(a).attr("type")},n.push(t)}),n}function getPriceRender(){GY.iop({url:GY["interface"].getPrice.url,data:{method:"getPriceListForSearch",params:JSON.stringify(getListParams())}}).done(function(e){$.each(_items,function(t,n){var a=0;1==$(n).attr("goodstypetarget")?$(n).find(".opr").html('<em class="rmb"></em>价格待定'):(0===e.data[t].isPromotion?(a=e.data[t].promotionPriceStr,$(n).find(".cpr").removeClass("hide"),$(n).find(".cpr").html('<em class="rmb">¥</em>'+e.data[t].sellingPriceStr+"<i></i>")):a=e.data[t].sellingPriceStr,$(n).find(".opr").html('<em class="rmb">¥</em>'+a)),$.each(e.data[t].promotionDescList,function(e,t){$(n).find(".extra").append('<span class="lib">'+promotionType(t.promotionType,t.type)+"</span>")})})})}function eq(e){for(var t=0;t<e.length;t++){if("0"!=e[t])return e;delete e[t]}return e}function foo(e){for(var t=eq(e),n=[],a=0;a<t.length;a++)"undefined"!=typeof t[a]&&n.push(t[a]);return n.reverse().join("-")}function subStr(e){return console.log(e),e.replace(/(-0)+$/gi,"")}function getPageType(){return-1!==window.location.pathname.indexOf("/search")?1:-1!==window.location.pathname.indexOf("/mergeOrderSearch")?2:3}function resetPath(e){var t=$.extend({values:"",index:0,len:1,type:1,subType:1},e);if(1===getPageType())var n=t.index;else if(3===getPageType())var n=t.index-1;else if(2===getPageType())var n=t.index;if(-1===window.location.pathname.substring(1).indexOf("category"))if(window.location.pathname.substring(1).split("/")[1])var a=window.location.pathname.substring(1).split("/")[1],i=a.split("-");else var i=[];else if(window.location.pathname.substring(1).split("/")[0]){var a=window.location.pathname.substring(1).split("/")[0];console.log(a);var i=a.split("-")}else var i=[];var r=i.length;if(r>n)i.splice(n,t.len,t.values);else{for(var s=0;n-r>s;s++)i.push("0");i.push(t.values)}return i}function getUrlSearch(){return window.location.search?GY.GetUrlParms(location.search.substring(1)).pageNum?(console.log(GY.UrlParamDel(window.location.href,"pageNum")),-1!==GY.UrlParamDel(window.location.href,"pageNum").indexOf("?")?"?"+GY.UrlParamDel(window.location.href,"pageNum").split("?")[1]:""):"?"+location.search.substring(1):""}var PROMOTIONDESC_1="折扣",PROMOTIONDESC_2="降价",PROMOTIONDESC_3="促销价",PROMOTIONDESC_4="换购",PROMOTIONDESC_5="赠品",PROMOTIONDESC_6="满减",PROMOTIONDESC_7="满折",PROMOTIONDESC_8="满赠",PROMOTIONDESC_9="包邮",PROMOTIONDESC_10="赠品",PROMOTIONDESC_ERROR="未知",hostlink=window.location.href,specs=[],cachedata=$("#cachedata");GY.datalevel={};var _items=$(".product-list ul li .items");"true"===$("[name=isStaticPage]").val()&&getPriceRender(),$.fn.more=function(e){var t=$(e);$.each(t,function(e,t){var n=$(t).find(".supinfo").height();n>35&&($(t).after('<h4 style="display: block;"><b></b></h4>'),$(t).siblings("h4").show(),$(t).siblings("h4").unbind().bind("click",function(){var e=$(t).siblings("h4").find("b");e.hasClass("close")?($(t).css("height","34px"),$(t).siblings("h4").find("b").removeClass("close"),$(t).css("height","34px")):($(t).css("height",n+"px"),$(t).siblings("h4").find("b").addClass("close"))}))})};var pathFirst=window.location.pathname.substring(1).split("/")[0],searchUrl=getUrlSearch();GY.GetUrlParms(location.search.substring(1)).inResultWord?($("#inResultWordBox").val(decodeURIComponent(GY.GetUrlParms(location.search.substring(1)).inResultWord)),$(".res_btn").text("取消")):($("#inResultWordBox").val(""),$(".res_btn").text("查找")),$(document).on("click",".res_btn",function(){var e="",t="";if($('[name="pageUrl"]').size()>0&&$('[name="pageUrl"]')){var n=$('[name="pageUrl"]').val();hostlink=GY.host.main+n}if("取消"==$(this).text())$(this).text("查找"),$("#inResultWordBox").val(""),e=GY.UrlParamDel(hostlink,"inResultWord");else{var a=$("#inResultWordBox").val();if(""==a)return!1;e=GY.UrlUpdateParams(hostlink,"inResultWord",a),$(this).text("取消")}$("#cachedata").attr("inresultword",GY.replaceChart($("#inResultWordBox").val())),$("#cachedata").attr("pagenum",""),t=GY.UrlParamDel(e,"pageNum"),window.location=t}),$(document).on("click",".collect",function(e){e.preventDefault();var t=$(this);if(!t.hasClass("collect_on")){var n=window.location.pathname+window.location.search;GY.iop({url:GY["interface"].userCollection.url,data:{method:GY["interface"].userCollection.method,code:$(this).parents(".items").attr("code"),skuId:0,type:$(this).parents(".items").attr("type"),url:n}}).done(function(e){0==e.status?(t.addClass("collect_on"),t.html("<i></i>已收藏")):-3==e.status?GY.loginCard.init():-2===e.status?(t.addClass("collect_on"),t.html("<i></i>已收藏")):-4==e.status?window.location.href="http://"+window.location.host:GY.dialogInfo({title:"错误信息",text:e.msg})}).fail(function(){})}}),$(document).on("click",".package p a",function(){var e=$(this);e.hasClass("packagelib")&&GY.iop({url:GY["interface"].getPrice.url,data:{method:GY["interface"].getPrice.method,goodCode:e.parent().parent().siblings(".wrap").find(".items").eq(e.index()).attr("code"),goodCount:1,type:2}}).done(function(t){if(1===t.data.gwGoodPriceDetailResponseVO.goodsTypeTarget)e.parent().parent().siblings(".wrap").find(".items").eq(e.index()).find(".opr").html("价格待定");else if(1==t.data.gwGoodPriceDetailResponseVO.isPromotion)e.parent().parent().siblings(".wrap").find(".items").eq(e.index()).find(".opr").html('<em class="rmb">¥</em>'+t.data.gwGoodPriceDetailResponseVO.sellingPriceStr);else{console.log(e.parent().parent().siblings(".wrap").find(".items").eq(e.index()).find(".name").text()),e.parent().parent().siblings(".wrap").find(".items").eq(e.index()).find(".opr").html('<em class="rmb">¥</em>'+t.data.gwGoodPriceDetailResponseVO.promotionPriceStr),0==e.parent().parent().siblings(".wrap").find(".items").eq(e.index()).find(".cpr").size()?e.parent().parent().siblings(".wrap").find(".items").eq(e.index()).find(".opr").after('<span class="cpr"><em class="rmb">¥</em>'+t.data.gwGoodPriceDetailResponseVO.sellingPriceStr+"<i></i></span>"):e.parent().parent().siblings(".wrap").find(".items").eq(e.index()).find(".cpr").html('<em class="rmb">¥</em>'+t.data.gwGoodPriceDetailResponseVO.sellingPriceStr+"<i></i>");var n=[];$.each(t.data.gwGoodPriceDetailResponseVO.promotionDescList,function(e,t){n.push('<span class="lib">'+promotionType(t.promotionType,t.type)+"</span>")}),e.parent().parent().siblings(".wrap").find(".items").eq(e.index()).find(".extra").html(n.join(""))}}),$(this).parent().parent().siblings(".wrap").find(".items").hide(),$(this).parent().parent().siblings(".wrap").find(".items").eq($(this).index()).show()}),$(document).on("click",".s-more",function(e){e.preventDefault,$(this).find(".sm-wrap").hasClass("opened")?($(this).find(".sm-wrap").removeClass("opened").html("更多选项<i></i>"),$(".attribute .item:gt(3)").addClass("hide")):($(this).find(".sm-wrap").addClass("opened").html("收起<i></i>"),$(".attribute .item").removeClass("hide"))}),$("#priceMin, #priceMax").keyup(function(e){var t=this;t.value=t.value.replace(/[^0-9]/g,"")}),$(document).on("click","#priceBtn",function(){var e,t=$("#priceMin").val(),n=$("#priceMax").val();if(""===t&&""===n)return!1;e=""===t&&""!==n?"0_"+parseInt(n):""!==t&&""===n?parseInt(t)+"以上":parseInt(t)+"_"+parseInt(n);var a=e;if(-1===window.location.pathname.substring(1).indexOf("category"))var i=resetPath({values:a,index:4,len:1,type:2,subType:1}),r=GY.host.main+"/"+pathFirst+"/"+i.join("-");else var i=resetPath({values:a,index:12,len:1,type:2,subType:1}),r=GY.host.main+"/"+i.join("-");window.location=r+searchUrl}),!function(e,t,n){function a(t){var a=1;"next"==t?a+=1:"prev"==t?a-=1:a=t;var i=n.UrlUpdateParams(hostlink,"pageNum",a);e.location=i}return $.fn.headerSet({isIndex:"",hot:"1",search:"1",miniShop:"1",isAdbox:"1"}),$(".option_s").size()>0?$.fn.more(".option_s"):$.fn.more(".option_c"),$(document).on("click",".items h3 span",function(){$(this).parent().parent().hasClass("active")?$(this).parent().parent().removeClass("active"):$(this).parent().parent().addClass("active")}),$(document).on("mouseenter mouseleave",".drop2",function(e){var t=$(".level2list");"mouseenter"==e.type?(t.show(),$(".category2").addClass("curr")):"mouseleave"==e.type&&($(".category2").removeClass("curr"),t.hide())}),$(document).on("mouseenter mouseleave",".drop3",function(e){var t=$(".level3list");"mouseenter"==e.type?(t.show(),$(".category3").addClass("curr")):"mouseleave"==e.type&&(t.hide(),$(".category3").removeClass("curr"))}),$(document).on("click",".pagenum a",function(){a($(this).attr("info")),$("body,html").animate({scrollTop:100},0)}),$(document).on("click",".pagin a",function(){a($(this).attr("info"))}),$(document).on("click",".gotobtn",function(){var e=$.trim($(".pageInt").eq(1).val()),t=/^[0-9]*[1-9][0-9]*$/;t.test(e)?e>parseInt($(".totalpages").eq(1).text())&&(e=parseInt($(".totalpages").eq(1).text())):e=1,a(e)}),t}(window,jQuery,GY);